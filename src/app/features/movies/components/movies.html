<section class="movies-page">
  <header class="page-header">
    <div class="page-title">
      <p class="eyebrow">Featured collection</p>
      <h1>Discover top movies</h1>
      <p class="subtitle">
        Pick a film for the perfect movie night, search by director or genre, and enjoy a refined
        layout that highlights every detail.
      </p>
    </div>

    <app-movie-filter (search)="onSearch($event)" />
  </header>

  <div class="page-meta" *ngIf="!isLoading() && !errorMessage()">
    <span class="badge">{{ filteredMovies().length }} movies</span>
    <ul class="genre-pills">
      <li *ngFor="let genre of genres()">{{ genre }}</li>
    </ul>
  </div>

  <div class="state" *ngIf="isLoading()">
    <p class="state__message">Loading the movie list...</p>
  </div>

  <div class="state state--error" *ngIf="!isLoading() && errorMessage()">
    <p class="state__message">{{ errorMessage() }}</p>
  </div>

  <div class="state" *ngIf="!isLoading() && !errorMessage() && filteredMovies().length === 0">
    <p class="state__message">No movies match your current search.</p>
  </div>

  <app-movies-list
    *ngIf="!isLoading() && !errorMessage() && filteredMovies().length > 0"
    [movies]="filteredMovies()"
    (viewDetails)="openMovieDetails($event)"
  />

  <app-movie-details />
</section>
